<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Skywalkers Test Engine</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        /* CSS Reset & Variables */
        :root {
            --header-bg: #fff;
            --text-main: #333;
            --primary: #2563eb;
            --success: #22c55e;
            --danger: #ef4444;
            --warning: #f59e0b;
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f3f4f6; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* HEADER */
        .header {
            height: 60px; background: var(--header-bg); padding: 0 15px; display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); z-index: 10;
        }
        .logo { font-weight: 700; font-size: 1.1rem; color: #1e293b; }
        
        /* Language Toggle */
        .lang-switch {
            display: flex; background: #e2e8f0; border-radius: 20px; padding: 2px;
        }
        .lang-opt {
            padding: 5px 12px; font-size: 0.8rem; font-weight: bold; border-radius: 18px; cursor: pointer; transition: 0.3s;
        }
        .lang-opt.active { background: var(--primary); color: white; }

        .timer-box { font-weight: bold; background: #fef3c7; color: #d97706; padding: 5px 10px; border-radius: 5px; font-size: 0.9rem; }

        /* MAIN CONTENT */
        .main-container { flex: 1; display: flex; overflow: hidden; position: relative; }

        /* Question Area */
        .q-area { 
            flex: 1; padding: 20px; overflow-y: auto; background: white; margin: 10px; border-radius: 8px; 
            display: flex; flex-direction: column; 
        }
        .q-info { 
            display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 15px; font-size: 0.9rem; font-weight: 600; color: #64748b;
        }
        .q-text { font-size: 1.1rem; line-height: 1.6; color: #1e293b; margin-bottom: 20px; font-weight: 500; }
        
        /* Options */
        .option-item {
            display: flex; align-items: center; padding: 12px 15px; margin-bottom: 10px; 
            border: 2px solid #e2e8f0; border-radius: 8px; cursor: pointer; transition: 0.2s;
        }
        .option-item:hover { background: #f8fafc; }
        .option-item.selected { border-color: var(--primary); background: #eff6ff; }
        .radio-circle {
            height: 20px; width: 20px; border: 2px solid #94a3b8; border-radius: 50%; margin-right: 15px; flex-shrink: 0;
            display: flex; align-items: center; justify-content: center;
        }
        .option-item.selected .radio-circle { border-color: var(--primary); }
        .radio-inner { height: 10px; width: 10px; background: var(--primary); border-radius: 50%; display: none; }
        .option-item.selected .radio-inner { display: block; }

        /* SIDEBAR (Desktop) / DRAWER (Mobile) */
        .sidebar {
            width: 300px; background: white; border-left: 1px solid #e2e8f0; display: flex; flex-direction: column;
            transition: transform 0.3s ease;
        }
        
        /* Mobile specific styles */
        @media (max-width: 768px) {
            .sidebar {
                position: absolute; top: 0; right: 0; height: 100%; width: 80%;
                transform: translateX(100%); z-index: 20; box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            }
            .sidebar.open { transform: translateX(0); }
            .q-area { margin: 0; border-radius: 0; }
            .header { padding: 0 10px; }
            .logo { font-size: 0.9rem; max-width: 120px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        }

        .user-card { padding: 15px; background: #f1f5f9; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e2e8f0; }
        .user-avatar { width: 40px; height: 40px; background: #cbd5e1; border-radius: 50%; }
        
        .palette-grid { padding: 15px; flex: 1; overflow-y: auto; display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; align-content: start; }
        .p-btn {
            height: 35px; width: 35px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; font-size: 0.85rem; font-weight: bold; cursor: pointer; border: 1px solid #cbd5e1;
        }
        
        /* Palette Colors */
        .p-btn.ans { background: var(--success); color: white; border: none; }
        .p-btn.not-ans { background: var(--danger); color: white; border: none; }
        .p-btn.review { background: #8b5cf6; color: white; border: none; }
        .p-btn.current { border: 2px solid var(--primary); box-shadow: 0 0 5px var(--primary); }

        /* FOOTER */
        .footer {
            height: 60px; background: white; border-top: 1px solid #e2e8f0; padding: 0 15px;
            display: flex; align-items: center; justify-content: space-between; z-index: 10;
        }
        .btn {
            padding: 10px 15px; border-radius: 6px; border: none; font-weight: 600; cursor: pointer; font-size: 0.9rem;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-outline { background: white; border: 1px solid #cbd5e1; color: #333; }
        .btn-mob-palette { display: none; background: #334155; color: white; }

        @media (max-width: 768px) {
            .footer { justify-content: space-between; gap: 10px; }
            .btn { font-size: 0.8rem; padding: 8px 10px; flex: 1; }
            .btn-mob-palette { display: block; flex: 0.5; } /* Show Palette toggle on mobile */
            .btn-review { display: none; } /* Hide Mark Review on tiny screens to save space */
        }
        
        /* Overlay for mobile drawer */
        .overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 15;
        }
        .overlay.active { display: block; }

    </style>
</head>
<body>

    <div class="header">
        <div class="logo">SSC CGL Mock 01</div>
        
        <div class="lang-switch">
            <div class="lang-opt active" id="lang-en" onclick="setLang('en')">EN</div>
            <div class="lang-opt" id="lang-hi" onclick="setLang('hi')">HI</div>
        </div>

        <div class="timer-box" id="timer">00:00</div>
    </div>

    <div class="main-container">
        <div class="q-area">
            <div class="q-info">
                <span>Question <span id="q-num">1</span></span>
                <span style="color: var(--success);">+2.0</span>
                <span style="color: var(--danger); margin-left: 5px;">-0.5</span>
            </div>
            
            <div class="q-text" id="q-text">Loading...</div>
            <div id="options-container"></div>
        </div>

        <div class="overlay" onclick="toggleSidebar()"></div>

        <div class="sidebar" id="sidebar">
            <div class="user-card">
                <div class="user-avatar"></div>
                <div style="font-size: 0.9rem;">
                    <strong>Student</strong><br>
                    <span style="color:#64748b; font-size: 0.8rem;">Skywalkers</span>
                </div>
                <div style="margin-left:auto; cursor:pointer;" onclick="toggleSidebar()">âœ•</div>
            </div>
            
            <div class="palette-grid" id="palette-box"></div>
            
            <div style="padding: 15px; border-top: 1px solid #e2e8f0; margin-top: auto;">
                <button class="btn btn-primary" style="width: 100%; background: var(--success);" onclick="submitTest()">SUBMIT TEST</button>
            </div>
        </div>
    </div>

    <div class="footer">
        <button class="btn btn-mob-palette" onclick="toggleSidebar()">ðŸŽ¨ View</button>
        <button class="btn btn-outline" id="prev-btn" onclick="prevQ()">Previous</button>
        <button class="btn btn-outline btn-review" onclick="markReview()">Review</button>
        <button class="btn btn-primary" onclick="saveNext()">Save & Next</button>
    </div>

    <script>
        // --- DATA WITH HINDI & ENGLISH ---
        const questions = [
            {
                id: 1,
                text: { 
                    en: "Which Article of the Indian Constitution deals with the 'Right to Equality'?", 
                    hi: "à¤­à¤¾à¤°à¤¤à¥€à¤¯ à¤¸à¤‚à¤µà¤¿à¤§à¤¾à¤¨ à¤•à¤¾ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤…à¤¨à¥à¤šà¥à¤›à¥‡à¤¦ 'à¤¸à¤®à¤¾à¤¨à¤¤à¤¾ à¤•à¥‡ à¤…à¤§à¤¿à¤•à¤¾à¤°' à¤¸à¥‡ à¤¸à¤‚à¤¬à¤‚à¤§à¤¿à¤¤ à¤¹à¥ˆ?" 
                },
                options: {
                    en: ["Article 12-13", "Article 14-18", "Article 19-22", "Article 23-24"],
                    hi: ["à¤…à¤¨à¥à¤šà¥à¤›à¥‡à¤¦ 12-13", "à¤…à¤¨à¥à¤šà¥à¤›à¥‡à¤¦ 14-18", "à¤…à¤¨à¥à¤šà¥à¤›à¥‡à¤¦ 19-22", "à¤…à¤¨à¥à¤šà¥à¤›à¥‡à¤¦ 23-24"]
                },
                correct: 1
            },
            {
                id: 2,
                text: { 
                    en: "Select the antonym of 'OBSOLETE'.", 
                    hi: "'OBSOLETE' (à¤…à¤ªà¥à¤°à¤šà¤²à¤¿à¤¤) à¤•à¤¾ à¤µà¤¿à¤²à¥‹à¤® à¤šà¥à¤¨à¥‡à¤‚à¥¤" 
                },
                options: {
                    en: ["Outdated", "Remote", "Recent", "Rigid"],
                    hi: ["à¤ªà¥à¤°à¤¾à¤¨à¤¾", "à¤¦à¥‚à¤°à¤¸à¥à¤¥", "à¤¹à¤¾à¤² à¤•à¤¾ (Recent)", "à¤•à¤ à¥‹à¤°"]
                },
                correct: 2
            },
            {
                id: 3,
                text: { 
                    en: "If A:B = 2:3 and B:C = 4:5, then find A:B:C.", 
                    hi: "à¤¯à¤¦à¤¿ A:B = 2:3 à¤”à¤° B:C = 4:5 à¤¹à¥ˆ, à¤¤à¥‹ A:B:C à¤œà¥à¤žà¤¾à¤¤ à¤•à¥€à¤œà¤¿à¤¯à¥‡à¥¤" 
                },
                options: {
                    en: ["8:12:15", "6:8:10", "8:10:12", "12:15:20"],
                    hi: ["8:12:15", "6:8:10", "8:10:12", "12:15:20"]
                },
                correct: 0
            }
        ];

        let currIdx = 0;
        let currentLang = 'en'; // Default English
        let answers = new Array(questions.length).fill(null);
        let status = new Array(questions.length).fill(0); // 0: Not Visited, 1: Not Answered, 2: Answered, 3: Review
        let timer = 3600;

        // Init
        document.addEventListener("DOMContentLoaded", () => {
            loadQ(0);
            renderPalette();
            startTimer();
            updateNavButtons();
        });

        // Toggle Sidebar (Mobile)
        function toggleSidebar() {
            const sb = document.getElementById('sidebar');
            const ov = document.querySelector('.overlay');
            sb.classList.toggle('open');
            ov.classList.toggle('active');
        }

        // Language Switcher
        function setLang(lang) {
            currentLang = lang;
            document.getElementById('lang-en').classList.remove('active');
            document.getElementById('lang-hi').classList.remove('active');
            document.getElementById(`lang-${lang}`).classList.add('active');
            loadQ(currIdx); // Reload current question in new language
        }

        function loadQ(idx) {
            currIdx = idx;
            const qData = questions[idx];
            
            document.getElementById('q-num').innerText = idx + 1;
            document.getElementById('q-text').innerText = qData.text[currentLang];
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';

            qData.options[currentLang].forEach((opt, i) => {
                const isSelected = answers[idx] === i ? 'selected' : '';
                container.innerHTML += `
                <div class="option-item ${isSelected}" onclick="selectOption(${i})">
                    <div class="radio-circle"><div class="radio-inner"></div></div>
                    <span>${opt}</span>
                </div>`;
            });

            if(status[idx] === 0) status[idx] = 1; // Mark as visited (Not Answered)
            renderPalette();
            updateNavButtons();
        }

        function selectOption(i) {
            const opts = document.querySelectorAll('.option-item');
            opts.forEach(o => o.classList.remove('selected'));
            opts[i].classList.add('selected');
        }

        function saveNext() {
            const selected = document.querySelector('.option-item.selected');
            if(selected) {
                // Find index based on DOM order
                const allOpts = Array.from(document.querySelectorAll('.option-item'));
                const index = allOpts.indexOf(selected);
                answers[currIdx] = index;
                status[currIdx] = 2; // Answered
            } else {
                status[currIdx] = 1; // Not Answered
            }

            if(currIdx < questions.length - 1) {
                loadQ(currIdx + 1);
            }
        }

        function prevQ() {
            if(currIdx > 0) loadQ(currIdx - 1);
        }

        function markReview() {
            status[currIdx] = 3; // Review
            const selected = document.querySelector('.option-item.selected');
            if(selected) {
                 const allOpts = Array.from(document.querySelectorAll('.option-item'));
                 answers[currIdx] = allOpts.indexOf(selected);
            }
            if(currIdx < questions.length - 1) loadQ(currIdx + 1);
        }

        function updateNavButtons() {
            document.getElementById('prev-btn').disabled = (currIdx === 0);
            document.getElementById('prev-btn').style.opacity = (currIdx === 0) ? '0.5' : '1';
        }

        function renderPalette() {
            const box = document.getElementById('palette-box');
            box.innerHTML = '';
            status.forEach((st, i) => {
                let cls = 'p-btn ';
                if(st === 2) cls += 'ans';
                else if(st === 3) cls += 'review';
                else if(st === 1) cls += 'not-ans';
                
                if(i === currIdx) cls += ' current';
                
                box.innerHTML += `<div class="${cls}" onclick="loadQ(${i}); if(window.innerWidth<768) toggleSidebar();">${i+1}</div>`;
            });
        }

        function startTimer() {
            const el = document.getElementById('timer');
            setInterval(() => {
                if(timer > 0) {
                    timer--;
                    let m = Math.floor(timer/60);
                    let s = timer%60;
                    el.innerText = `${m}:${s<10?'0':''}${s}`;
                } else {
                    submitTest();
                }
            }, 1000);
        }

        function submitTest() {
            let correct = 0, wrong = 0, skip = 0;
            answers.forEach((ans, i) => {
                if(ans === null) skip++;
                else if(ans === questions[i].correct) correct++;
                else wrong++;
            });
            let score = (correct * 2) - (wrong * 0.5);
            
            const result = { score, correct, wrong, skip, accuracy: ((correct/(correct+wrong))*100 || 0).toFixed(1) };
            localStorage.setItem('testResult', JSON.stringify(result));
            window.location.href = 'analytics.html';
        }
    </script>
</body>
</html>
